# 视频URL配置功能使用说明

## 功能概述

在个人中心新增了"视频配置"标签页，管理员可以方便地为作品配置视频URL，支持自动搜索视频源。

## 访问方式

1. 登录后进入"个人中心"
2. 点击"视频配置"标签页

## 主要功能

### 1. 选择作品

- 左侧列表显示所有可用作品（包括mockData和爬虫获取的数据）
- 每个作品显示：
  - 封面图
  - 标题
  - 类型标签
  - 年份和国家
  - 是否已配置视频URL的标识
- 点击作品卡片即可选中

### 2. 自动搜索视频URL

- 选中作品后，点击"🔍 自动搜索视频URL"按钮
- 系统会根据作品标题和类型自动搜索可用的视频源
- 搜索结果会显示：
  - 平台名称
  - 画质（高清/超清/蓝光）
  - 描述信息
  - "使用"按钮，一键采用该视频源

**注意**：当前搜索功能返回的是模拟数据，生产环境应接入真实的视频搜索服务。

### 3. 配置视频URL

#### 电影类型

电影类型只需配置一个视频URL：
- 在"视频URL"输入框中输入视频地址
- 支持的格式：.mp4, .m3u8, .flv, .webm, .mkv等
- 输入后会自动验证URL格式

#### 其他类型（电视剧、动漫、综艺等）

其他类型需要配置分集URL：

**单个添加：**
1. 在"新增"下拉框中选择集数
2. 在输入框中输入对应集数的URL
3. 可以点击"删除"按钮移除某集

**批量添加：**
1. 点击"批量添加"按钮
2. 输入要添加的集数（例如：10）
3. 输入URL模式（例如：`https://example.com/episode/{episode}.mp4`）
4. 系统会自动生成10集的URL，其中`{episode}`会被替换为集数

### 4. 保存配置

- 配置完成后，点击"💾 保存配置"按钮
- 配置会保存到localStorage中
- 保存后的视频URL会在详情页播放器中生效

## URL格式要求

- 必须是有效的HTTP/HTTPS URL
- 必须是视频文件格式（.mp4, .m3u8, .flv, .webm, .mkv等）
- 必须支持跨域访问（CORS）
- 建议使用稳定的CDN或对象存储服务

## 注意事项

1. **权限要求**：此功能需要管理员权限使用
2. **视频质量**：建议使用高清或超清视频源
3. **网络稳定**：确保视频源URL稳定可靠
4. **版权合规**：只使用有授权的视频源
5. **定期检查**：定期检查视频URL是否有效

## API接口

### 搜索视频URL

**接口**：`POST /api/video/search`

**请求参数**：
```json
{
  "title": "作品标题",
  "type": "作品类型（电影/电视剧等）"
}
```

**响应示例**：
```json
{
  "success": true,
  "query": "搜索关键词",
  "results": [
    {
      "platform": "平台名称",
      "url": "视频URL",
      "quality": "画质",
      "description": "描述"
    }
  ]
}
```

### 验证并保存视频URL

**接口**：`POST /api/video/save`

**请求参数**：
```json
{
  "mediaId": "作品ID",
  "videoUrl": "视频URL（电影类型）",
  "episodeUrls": {
    "1": "第1集URL",
    "2": "第2集URL"
  }
}
```

**响应示例**：
```json
{
  "success": true,
  "message": "视频URL验证通过",
  "data": {
    "mediaId": "作品ID",
    "videoUrl": "视频URL",
    "episodeUrls": {}
  }
}
```

## 未来扩展

1. **接入真实搜索服务**：集成百度搜索、必应搜索等API
2. **视频源管理**：添加视频源的启用/禁用、优先级管理
3. **自动检测**：定期自动检测视频URL是否有效
4. **批量导入**：支持从Excel/CSV批量导入视频URL
5. **历史记录**：记录视频URL的修改历史
